{"ast":null,"code":"import { ITodoActionsTypes } from \"../../types/types\";\nimport { call, put, takeEvery } from \"redux-saga/effects\";\nimport { TodoApi } from \"../../api\";\nimport { hideAlert, showAlert } from \"../Actions\";\nconst delay = time => new Promise(resolve => setTimeout(resolve, time));\nfunction* sagaCreateTodo(action) {\n  try {\n    const todoObject = {\n      title: action.payload,\n      done: false\n    };\n    const todo = yield call(TodoApi.createTodo, todoObject);\n    yield put({\n      type: ITodoActionsTypes.CREATE_TODO_SUCCESS,\n      payload: todo\n    });\n    yield put(showAlert('Дело успешно создано', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert('Не удалось создать дело', 'warning'));\n  }\n}\nfunction* sagaDeleteTodo(action) {\n  try {\n    const todos = yield call(TodoApi.deleteTodo, action.payload);\n    yield put({\n      type: ITodoActionsTypes.DELETE_TODO_SUCCESS,\n      payload: todos\n    });\n    yield put(showAlert('Дела успешно удалено', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert('Не удалось удалить дело', 'warning'));\n  }\n}\nfunction* sagaGetTodos() {\n  try {\n    const todo = yield call(TodoApi.getTodos);\n    yield put({\n      type: ITodoActionsTypes.GET_TODOS_SUCCESS,\n      payload: todo\n    });\n    yield put(showAlert('Дела успешно загружены', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    yield put(showAlert('Не удалось загрузить дела', 'warning'));\n  }\n}\nfunction* sagaCompleteTodos(action) {\n  try {\n    const todoObject = {\n      done: action.payload.done,\n      id: action.payload.id\n    };\n    yield call(TodoApi.completeTodo, todoObject);\n    yield put({\n      type: ITodoActionsTypes.COMPLETE_TODO_SUCCESS,\n      payload: action.payload.id\n    });\n    yield put(showAlert('Дела успешно завершено', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    console.log('error', error);\n  }\n}\nfunction* sagaEditTodos(action) {\n  try {\n    const todoObject = {\n      done: action.payload.done,\n      id: action.payload.id,\n      title: action.payload.title\n    };\n    const todo = yield call(TodoApi.editTodo, todoObject);\n    yield put({\n      type: ITodoActionsTypes.CHANGE_TODO_SUCCESS,\n      payload: todo,\n      id: action.payload.id\n    });\n    yield put(showAlert('Дела успешно изменено', 'success'));\n    yield call(delay, 3000);\n    yield put(hideAlert());\n  } catch (error) {\n    console.log('error', error);\n  }\n}\nexport function* sagaWatcher() {\n  yield takeEvery(ITodoActionsTypes.CREATE_TODO, sagaCreateTodo);\n  yield takeEvery(ITodoActionsTypes.DELETE_TODO, sagaDeleteTodo);\n  yield takeEvery(ITodoActionsTypes.GET_TODOS, sagaGetTodos);\n  yield takeEvery(ITodoActionsTypes.COMPLETE_TODO, sagaCompleteTodos);\n  yield takeEvery(ITodoActionsTypes.CHANGE_TODO, sagaEditTodos);\n}","map":{"version":3,"names":["ITodoActionsTypes","call","put","takeEvery","TodoApi","hideAlert","showAlert","delay","time","Promise","resolve","setTimeout","sagaCreateTodo","action","todoObject","title","payload","done","todo","createTodo","type","CREATE_TODO_SUCCESS","error","sagaDeleteTodo","todos","deleteTodo","DELETE_TODO_SUCCESS","sagaGetTodos","getTodos","GET_TODOS_SUCCESS","sagaCompleteTodos","id","completeTodo","COMPLETE_TODO_SUCCESS","console","log","sagaEditTodos","editTodo","CHANGE_TODO_SUCCESS","sagaWatcher","CREATE_TODO","DELETE_TODO","GET_TODOS","COMPLETE_TODO","CHANGE_TODO"],"sources":["E:/bem/client/todo/src/redux/saga/sagas.ts"],"sourcesContent":["import {ICompleteAction, ICreateAction, IDeleteAction, IEditAction, ITodo, ITodoActionsTypes} from \"../../types/types\";\r\nimport {call, Effect, put, takeEvery} from \"redux-saga/effects\";\r\nimport {TodoApi} from \"../../api\";\r\nimport {hideAlert, showAlert} from \"../Actions\";\r\n\r\nconst delay = (time: number) => new Promise(resolve => setTimeout(resolve, time))\r\nfunction* sagaCreateTodo(action: ICreateAction): Generator<Effect, void> {\r\n    try {\r\n        const todoObject: Partial<ITodo> = {\r\n            title: action.payload,\r\n            done: false\r\n        }\r\n        const todo = yield call(TodoApi.createTodo, todoObject)\r\n\r\n        yield put({ type: ITodoActionsTypes.CREATE_TODO_SUCCESS, payload: todo})\r\n        yield put(showAlert('Дело успешно создано','success'))\r\n        yield call(delay, 3000)\r\n        yield put(hideAlert())\r\n    } catch (error) {\r\n        yield put(showAlert('Не удалось создать дело','warning'))\r\n    }\r\n}\r\n\r\nfunction* sagaDeleteTodo(action: IDeleteAction): Generator<Effect, void> {\r\n    try {\r\n        const todos = yield call(TodoApi.deleteTodo, action.payload)\r\n\r\n        yield put({ type: ITodoActionsTypes.DELETE_TODO_SUCCESS, payload: todos})\r\n        yield put(showAlert('Дела успешно удалено','success'))\r\n        yield call(delay, 3000)\r\n        yield put(hideAlert())\r\n    } catch (error) {\r\n        yield put(showAlert('Не удалось удалить дело','warning'))\r\n    }\r\n}\r\nfunction* sagaGetTodos(): Generator<Effect, void, ITodo[]> {\r\n    try {\r\n        const todo = yield call(TodoApi.getTodos)\r\n\r\n        yield put({ type: ITodoActionsTypes.GET_TODOS_SUCCESS, payload: todo})\r\n        yield put(showAlert('Дела успешно загружены','success'))\r\n        yield call(delay, 3000)\r\n        yield put(hideAlert())\r\n    } catch (error) {\r\n        yield put(showAlert('Не удалось загрузить дела','warning'))\r\n    }\r\n}\r\nfunction* sagaCompleteTodos(action: ICompleteAction<ITodo>): Generator<Effect, void> {\r\n    try {\r\n        const todoObject: Partial<ITodo> = {\r\n            done: action.payload.done,\r\n            id: action.payload.id\r\n        }\r\n        yield call(TodoApi.completeTodo, todoObject)\r\n\r\n        yield put({ type: ITodoActionsTypes.COMPLETE_TODO_SUCCESS, payload: action.payload.id})\r\n        yield put(showAlert('Дела успешно завершено','success'))\r\n        yield call(delay, 3000)\r\n        yield put(hideAlert())\r\n    } catch (error) {\r\n        console.log('error', error)\r\n    }\r\n}\r\nfunction* sagaEditTodos(action: IEditAction): Generator<Effect, void, ITodo> {\r\n    try {\r\n        const todoObject: Partial<ITodo> = {\r\n            done: action.payload.done,\r\n            id: action.payload.id,\r\n            title: action.payload.title\r\n        }\r\n        const todo = yield call(TodoApi.editTodo, todoObject)\r\n\r\n        yield put({ type: ITodoActionsTypes.CHANGE_TODO_SUCCESS, payload: todo, id: action.payload.id})\r\n        yield put(showAlert('Дела успешно изменено','success'))\r\n        yield call(delay, 3000)\r\n        yield put(hideAlert())\r\n    } catch (error) {\r\n        console.log('error', error)\r\n    }\r\n}\r\n\r\nexport function* sagaWatcher(): Generator<Effect, void> {\r\n    yield takeEvery(ITodoActionsTypes.CREATE_TODO, sagaCreateTodo)\r\n    yield takeEvery(ITodoActionsTypes.DELETE_TODO, sagaDeleteTodo)\r\n    yield takeEvery(ITodoActionsTypes.GET_TODOS, sagaGetTodos)\r\n    yield takeEvery(ITodoActionsTypes.COMPLETE_TODO, sagaCompleteTodos)\r\n    yield takeEvery(ITodoActionsTypes.CHANGE_TODO, sagaEditTodos)\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}