{"ast":null,"code":"import { ITodoActionsTypes } from \"../../types/types\";\nimport { call, put, takeEvery } from \"redux-saga/effects\";\nimport { TodoApi } from \"../../api\";\nconst delay = time => new Promise();\nfunction* sagaCreateTodo(action) {\n  try {\n    const todoObject = {\n      title: action.payload,\n      done: false\n    };\n    const todo = yield call(TodoApi.createTodo, todoObject);\n    yield put({\n      type: ITodoActionsTypes.CREATE_TODO_SUCCESS,\n      payload: todo\n    });\n  } catch (error) {\n    console.log('error', error);\n  }\n}\nfunction* sagaDeleteTodo(action) {\n  try {\n    const todos = yield call(TodoApi.deleteTodo, action.payload);\n    yield put({\n      type: ITodoActionsTypes.DELETE_TODO_SUCCESS,\n      payload: todos\n    });\n  } catch (error) {\n    console.log('error', error);\n  }\n}\nfunction* sagaGetTodos() {\n  try {\n    const todo = yield call(TodoApi.getTodos);\n    yield put({\n      type: ITodoActionsTypes.GET_TODOS_SUCCESS,\n      payload: todo\n    });\n  } catch (error) {\n    console.log('error', error);\n  }\n}\nfunction* sagaCompleteTodos(action) {\n  try {\n    const todoObject = {\n      done: action.payload.done,\n      id: action.payload.id\n    };\n    yield call(TodoApi.completeTodo, todoObject);\n    yield put({\n      type: ITodoActionsTypes.COMPLETE_TODO_SUCCESS,\n      payload: action.payload.id\n    });\n  } catch (error) {\n    console.log('error', error);\n  }\n}\nfunction* sagaEditTodos(action) {\n  try {\n    const todoObject = {\n      done: action.payload.done,\n      id: action.payload.id,\n      title: action.payload.title\n    };\n    const todo = yield call(TodoApi.editTodo, todoObject);\n    yield put({\n      type: ITodoActionsTypes.CHANGE_TODO_SUCCESS,\n      payload: todo,\n      id: action.payload.id\n    });\n  } catch (error) {\n    console.log('error', error);\n  }\n}\nexport function* sagaWatcher() {\n  yield takeEvery(ITodoActionsTypes.CREATE_TODO, sagaCreateTodo);\n  yield takeEvery(ITodoActionsTypes.DELETE_TODO, sagaDeleteTodo);\n  yield takeEvery(ITodoActionsTypes.GET_TODOS, sagaGetTodos);\n  yield takeEvery(ITodoActionsTypes.COMPLETE_TODO, sagaCompleteTodos);\n  yield takeEvery(ITodoActionsTypes.CHANGE_TODO, sagaEditTodos);\n}","map":{"version":3,"names":["ITodoActionsTypes","call","put","takeEvery","TodoApi","delay","time","Promise","sagaCreateTodo","action","todoObject","title","payload","done","todo","createTodo","type","CREATE_TODO_SUCCESS","error","console","log","sagaDeleteTodo","todos","deleteTodo","DELETE_TODO_SUCCESS","sagaGetTodos","getTodos","GET_TODOS_SUCCESS","sagaCompleteTodos","id","completeTodo","COMPLETE_TODO_SUCCESS","sagaEditTodos","editTodo","CHANGE_TODO_SUCCESS","sagaWatcher","CREATE_TODO","DELETE_TODO","GET_TODOS","COMPLETE_TODO","CHANGE_TODO"],"sources":["E:/bem/client/todo/src/redux/saga/sagas.ts"],"sourcesContent":["import {ICompleteAction, ICreateAction, IDeleteAction, IEditAction, ITodo, ITodoActionsTypes} from \"../../types/types\";\r\nimport {call, Effect, put, takeEvery} from \"redux-saga/effects\";\r\nimport {TodoApi} from \"../../api\";\r\n\r\nconst delay = (time: number) => new Promise()\r\nfunction* sagaCreateTodo(action: ICreateAction): Generator<Effect, void> {\r\n    try {\r\n        const todoObject: Partial<ITodo> = {\r\n            title: action.payload,\r\n            done: false\r\n        }\r\n        const todo = yield call(TodoApi.createTodo, todoObject)\r\n\r\n        yield put({ type: ITodoActionsTypes.CREATE_TODO_SUCCESS, payload: todo})\r\n    } catch (error) {\r\n        console.log('error', error)\r\n    }\r\n}\r\n\r\nfunction* sagaDeleteTodo(action: IDeleteAction): Generator<Effect, void> {\r\n    try {\r\n        const todos = yield call(TodoApi.deleteTodo, action.payload)\r\n\r\n        yield put({ type: ITodoActionsTypes.DELETE_TODO_SUCCESS, payload: todos})\r\n    } catch (error) {\r\n        console.log('error', error)\r\n    }\r\n}\r\nfunction* sagaGetTodos(): Generator<Effect, void, ITodo[]> {\r\n    try {\r\n        const todo = yield call(TodoApi.getTodos)\r\n\r\n        yield put({ type: ITodoActionsTypes.GET_TODOS_SUCCESS, payload: todo})\r\n    } catch (error) {\r\n        console.log('error', error)\r\n    }\r\n}\r\nfunction* sagaCompleteTodos(action: ICompleteAction<ITodo>): Generator<Effect, void> {\r\n    try {\r\n        const todoObject: Partial<ITodo> = {\r\n            done: action.payload.done,\r\n            id: action.payload.id\r\n        }\r\n        yield call(TodoApi.completeTodo, todoObject)\r\n\r\n        yield put({ type: ITodoActionsTypes.COMPLETE_TODO_SUCCESS, payload: action.payload.id})\r\n    } catch (error) {\r\n        console.log('error', error)\r\n    }\r\n}\r\nfunction* sagaEditTodos(action: IEditAction): Generator<Effect, void, ITodo> {\r\n    try {\r\n        const todoObject: Partial<ITodo> = {\r\n            done: action.payload.done,\r\n            id: action.payload.id,\r\n            title: action.payload.title\r\n        }\r\n        const todo = yield call(TodoApi.editTodo, todoObject)\r\n\r\n        yield put({ type: ITodoActionsTypes.CHANGE_TODO_SUCCESS, payload: todo, id: action.payload.id})\r\n    } catch (error) {\r\n        console.log('error', error)\r\n    }\r\n}\r\n\r\nexport function* sagaWatcher(): Generator<Effect, void> {\r\n    yield takeEvery(ITodoActionsTypes.CREATE_TODO, sagaCreateTodo)\r\n    yield takeEvery(ITodoActionsTypes.DELETE_TODO, sagaDeleteTodo)\r\n    yield takeEvery(ITodoActionsTypes.GET_TODOS, sagaGetTodos)\r\n    yield takeEvery(ITodoActionsTypes.COMPLETE_TODO, sagaCompleteTodos)\r\n    yield takeEvery(ITodoActionsTypes.CHANGE_TODO, sagaEditTodos)\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}